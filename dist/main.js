(()=>{"use strict";function e(e,t){t&&("string"==typeof t?e.classList.add(t):e.classList.add(...t))}class t{dropdowns=[];htmlBar;constructor(e){this.htmlBar=e,e.querySelectorAll(".dropdown-anchor").forEach((e=>{this.dropdowns.push(new s(e))})),this.attachMouseEnterListeners()}attachMouseEnterListeners(){this.dropdowns.forEach((e=>{this.attachMouseEnterListener(e)}))}attachMouseEnterListener(e){e.getAnchor().htmlElem.addEventListener("mouseenter",(()=>{this.switchOpenedDropdowns(e)}))}switchOpenedDropdowns(e){const t=e.getAnchor();t.isEnabled()&&this.closeOpenedDropdowns([e])&&(t.openDropdown(),t.htmlElem.classList.add("highlighted"))}closeOpenedDropdowns(e){let t=0;return this.dropdowns.forEach((s=>{!e.includes(s)&&s.getAnchor().htmlElem.classList.contains("opened")&&(t++,s.closeHierarchy())})),t}}class s{origins=[];hoverDelay;htmlAnchor;constructor(e){this.htmlAnchor=e,this.hoverDelay=e.getAttribute("hoverdelay")||500,this.origins.push(new i(e,this.hoverDelay));const t=e.querySelectorAll(".dropdown-expand");for(const e of t)this.origins.push(new i(e,this.hoverDelay));this.attachMouseEnterListener(),this.attachClickListener(),this.attachResizeListener(),this.attachCloseOnSelectListeners()}getAnchor(){return this.origins[0]}closeHierarchy(){this.origins.forEach((e=>{e.htmlElem.classList.remove("highlighted"),e.htmlElem.classList.remove("opened")}))}closeDeeperThanMouse(e,t,s){const i=document.elementsFromPoint(e,t);let n;for(const e of i)if(e.classList.contains("dropdown")){n=e;break}if(!n)return;const o=n.querySelectorAll(".dropdown-expand, .dropdown-anchor");for(const e of o)s?e.classList.contains("highlighted")||e.classList.remove("opened"):(e.classList.remove("highlighted"),e.menuCloseTimeout=setTimeout((()=>{e.classList.contains("highlighted")||e.classList.remove("opened")}),this.hoverDelay))}closeOnClickOutsideHierarchy(e){var t,s;this.htmlAnchor.classList.contains("opened")&&(t=this.htmlAnchor)!==(s=e)&&!function(e,t){const s=e.querySelectorAll("*");for(const e of s)if(e===t)return!0;return!1}(t,s)&&this.closeHierarchy()}repositionOffscreenDropdowns(){if(this.getAnchor().htmlElem.classList.contains("opened")){this.getAnchor().repositionOffscreenMenu();for(let e=1;e<this.origins.length;e++)this.origins[e].htmlElem.classList.contains("opened")&&this.origins[e].repositionOffscreenMenu()}}attachMouseEnterListener(){this.htmlAnchor.addEventListener("mouseenter",(e=>{this.closeDeeperThanMouse(e.clientX,e.clientY,!1)}))}attachClickListener(){document.addEventListener("mousedown",(e=>{this.closeOnClickOutsideHierarchy(e.target),this.closeDeeperThanMouse(e.clientX,e.clientY,!0)}))}attachResizeListener(){window.addEventListener("resize",this.repositionOffscreenDropdowns.bind(this))}attachCloseOnSelectListeners(){const e=this.htmlAnchor.querySelectorAll("ul > div:first-of-type");for(const t of e)"true"===t.getAttribute("closeonselect")&&"false"!==t.getAttribute("enabled")&&t.addEventListener("mousedown",(e=>{0===e.button&&this.closeHierarchy()}))}}class i{enterTime;htmlElem;menuElem;itemElem;menuItemUls;menuItemDivs=[];menuOpenTimeout;menuCloseTimeout;hoverDelay;popDirection;appearAnimRunning=!1;static positionOffsetValues={negativeAnchorHorizBorderOffset:"calc(var(--dropdown-anchor-border-width-horiz) * -1)",negativeAnchorVertBorderOffset:"calc(var(--dropdown-anchor-border-width-vert) * -1)",negativeBorderOffset:"calc(var(--dropdown-border-width) * -1)",fullOffset:"100%"};static invertedDirections={top:"bottom",bottom:"top",right:"left",left:"right"};constructor(e,t){let s;this.htmlElem=e,this.menuElem=e.querySelector(".dropdown"),this.menuItemUls=this.getAllUlsAtThisDropdownLevel(),e.classList.contains("dropdown-anchor")?(s=e.getAttribute("popdirection")||"bottom-rightt",this.itemElem=e.querySelector(".dropdown-anchor > div:first-of-type")):(s=e.getAttribute("popdirection")||"right-bottom",this.appendSubmenuArrow(),this.itemElem=e.querySelector("ul > div:first-of-type")),this.popDirection=s.split("-"),this.hoverDelay=t||500,this.attachMouseEnterListener("click"!==e.getAttribute("onset")),this.attachClickListener(),this.attachMouseLeaveListeners(),this.attachAnimListeners()}getAllUlsAtThisDropdownLevel(){const e=[this.menuElem.querySelector("ul")];let t=e[0].nextSibling;for(;t;)1!==t.nodeType||t.classList.contains("dropdown-spacer")||e.push(t),t=t.nextSibling;return e}appendSubmenuArrow(){const t=this.htmlElem.querySelector(".dropdown");if(!t)return;const s=function(t,s,i,n){const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("viewBox","0 0 24 24");const r=document.createElementNS("http://www.w3.org/2000/svg","title");r.textContent=void 0,o.appendChild(r);const l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("d","M10,17L15,12L10,7V17Z"),o.appendChild(l),e(o,void 0),e(l,void 0),o}();s.classList.add("dropdown-expand-img"),this.htmlElem.insertBefore(s,t)}setMenuToDefaultPosition(){let e;e=this.htmlElem.classList.contains("dropdown-anchor")?"right"===this.popDirection[1]||"left"===this.popDirection[1]?i.positionOffsetValues.negativeAnchorHorizBorderOffset:i.positionOffsetValues.negativeAnchorVertBorderOffset:i.positionOffsetValues.negativeBorderOffset;const t=[i.invertedDirections[this.popDirection[0]],i.invertedDirections[this.popDirection[1]]];this.menuElem.style[this.popDirection[0]]="",this.menuElem.style[t[0]]=i.positionOffsetValues.fullOffset,this.menuElem.style[this.popDirection[1]]="",this.menuElem.style[t[1]]=e,this.menuElem.style["transform-origin"]=`${t[0]} ${t[1]}`}repositionOffscreenMenu(){this.setMenuToDefaultPosition();const e=document.documentElement.clientWidth||window.innerWidth,t=document.documentElement.clientHeight||window.innerHeight,s=this.menuElem.getBoundingClientRect(),i=window.getComputedStyle(this.menuElem).getPropertyValue("left"),n=Number(i.replace("px","")),o=window.getComputedStyle(this.menuElem).getPropertyValue("top"),r=Number(o.replace("px",""));s.left<=5?this.menuElem.style.left=n-s.left+5+"px":s.right>=e-5&&(this.menuElem.style.left=n-(s.right-e+5)+"px"),s.top<=5?this.menuElem.style.top=r-s.top+5+"px":s.bottom>=t-5&&(this.menuElem.style.top=r-(s.bottom-t+5)+"px")}isEnabled(){return"false"!==this.itemElem.getAttribute("enabled")}openDropdown(){this.htmlElem.classList.add("opened"),this.repositionOffscreenMenu(),this.menuItemDivs.forEach((e=>{e.classList.remove("mouseover")})),this.itemElem.classList.add("mouseover")}scheduleOpenMenu(){this.isEnabled()&&(this.htmlElem.classList.add("highlighted"),this.menuOpenTimeout=setTimeout((()=>{this.htmlElem.classList.contains("opened")||(this.openDropdown(),clearTimeout(this.menuCloseTimeout))}),this.hoverDelay))}scheduleCloseMenu(e,t){this.isEnabled()&&(clearTimeout(this.menuOpenTimeout),function(e,t){for(const t of e)if(t.classList.contains("dropdown"))return!0;return!1}(document.elementsFromPoint(e,t))&&(this.htmlElem.classList.remove("highlighted"),this.menuCloseTimeout=setTimeout((()=>{this.htmlElem.classList.contains("highlighted")||this.htmlElem.classList.remove("opened")}),this.hoverDelay)))}toggleOpenMenu(e,t){this.isEnabled()&&(function(e,t){for(const s of e)if(s===t)return!0;return!1}(document.elementsFromPoint(e,t),this.htmlElem)&&(this.htmlElem.classList.contains("opened")?(this.htmlElem.classList.remove("opened"),this.htmlElem.classList.contains("dropdown-anchor")&&this.htmlElem.classList.remove("highlighted"),clearTimeout(this.menuOpenTimeout)):(this.htmlElem.classList.add("highlighted"),this.openDropdown())),clearTimeout(this.menuCloseTimeout))}addMouseoverClass(e){"false"!==e.getAttribute("enabled")&&e.classList.add("mouseover")}attachMouseEnterListener(e){this.htmlElem.addEventListener("mouseenter",(()=>{e&&this.scheduleOpenMenu()}))}attachClickListener(){this.htmlElem.addEventListener("mousedown",(e=>{0===e.button&&this.toggleOpenMenu(e.clientX,e.clientY)}))}attachMouseLeaveListeners(){this.htmlElem.addEventListener("mouseleave",(e=>{this.scheduleCloseMenu(e.clientX,e.clientY)}));for(const e of this.menuItemUls){const t=e.querySelector("div:first-of-type");this.menuItemDivs.push(t),e.addEventListener("mouseleave",(()=>{this.addMouseoverClass(t)}))}}attachAnimListeners(){this.menuElem.addEventListener("animationend",(e=>{"appear"===e.animationName&&(this.appearAnimRunning=!1,this.repositionOffscreenMenu())})),this.menuElem.addEventListener("animationcancel",(e=>{"appear"===e.animationName&&(this.appearAnimRunning=!1)})),this.menuElem.addEventListener("animationstart",(e=>{"appear"===e.animationName&&(this.appearAnimRunning=!0,this.updateMenuAnimPosition())}))}updateMenuAnimPosition(){setTimeout((()=>{this.repositionOffscreenMenu(),this.appearAnimRunning&&this.updateMenuAnimPosition()}),1)}}!function(){const e=document.querySelectorAll(".dropdown-bar"),i=document.querySelectorAll("*:not(.dropdown-bar) > div.dropdown-anchor, *:not(.dropdown-bar) > button.dropdown-anchor"),n=[],o=[];e.forEach((e=>{n.push(new t(e))})),i.forEach((e=>{o.push(new s(e))}))}();const n=document.querySelectorAll("ul > div:first-of-type");const o=document.querySelector(".log-text");n.forEach((e=>{e.addEventListener("mousedown",(t=>{0===t.button&&"false"!==e.getAttribute("enabled")&&(console.log(`Clicked ${e.getAttribute("id")}`),o.textContent=`Clicked ${e.getAttribute("id")}`)}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LHlCQUNQLEdBRUosQ0FHQSxzQkFBQUEsR0FDRXZHLFlBQVcsS0FDVGhELEtBQUt5RCwwQkFFRHpELEtBQUs0RSxtQkFDUDVFLEtBQUt1Six3QkFDUCxHQUNDLEVBQ0wsR0FLYSxXQUNiLE1BQU1DLEVBQWUvRyxTQUFTeEMsaUJBQWlCLGlCQUN6Q3dKLEVBQWtCaEgsU0FBU3hDLGlCQUMvQiw2RkFHSXlKLEVBQU8sR0FDUEMsRUFBVSxHQUVoQkgsRUFBYXRKLFNBQVMwSixJQUNwQkYsRUFBS3ZKLEtBQUssSUFBSVIsRUFBWWlLLEdBQU0sSUFHbENILEVBQWdCdkosU0FBUzJKLElBQ3ZCRixFQUFReEosS0FBSyxJQUFJQyxFQUFTeUosR0FBUyxHQU92QyxDQzdmQSxHQUVBLE1BQU1DLEVEK2ZLckgsU0FBU3hDLGlCQUFpQiwwQkM5ZnJDLE1BQU04SixFQUFjdEgsU0FBU2dELGNBQWMsYUFFM0NxRSxFQUFVNUosU0FBUzhKLElBQ2pCQSxFQUFNdEosaUJBQWlCLGFBQWNrRCxJQUNiLElBQWxCQSxFQUFPUSxRQUFrRCxVQUFsQzRGLEVBQU1ySSxhQUFhLGFBQzVDc0ksUUFBUUMsSUFBSSxXQUFXRixFQUFNckksYUFBYSxTQUMxQ29JLEVBQVlwRCxZQUFjLFdBQVdxRCxFQUFNckksYUFBYSxRQUMxRCxHQUNBLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcy1saWtlLWRyb3Bkb3duLy4vc3JjL2RvbS11dGlsaXRpZXMuanMiLCJ3ZWJwYWNrOi8vb3MtbGlrZS1kcm9wZG93bi8uL3NyYy9vcy1saWtlLWRyb3Bkb3duLmpzIiwid2VicGFjazovL29zLWxpa2UtZHJvcGRvd24vLi9zcmMvc2NyaXB0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBmcmVlemUoX2h0bWxFbGVtLCBfZXhjbHVkZVNlbGVjdG9yKSB7XG4gIF9odG1sRWxlbS5jbGFzc0xpc3QuYWRkKFwiZnJlZXplXCIpO1xuICBjb25zdCBmb2N1c2FibGUgPSBfaHRtbEVsZW0ucXVlcnlTZWxlY3RvckFsbChcbiAgICBgW3RhYmluZGV4PVwiMFwiXSR7X2V4Y2x1ZGVTZWxlY3Rvcn1gXG4gICk7XG4gIGZvciAoY29uc3QgZWxlbSBvZiBmb2N1c2FibGUpIHtcbiAgICBlbGVtLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiLTFcIik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRoYXcoX2h0bWxFbGVtLCBfZXhjbHVkZVNlbGVjdG9yKSB7XG4gIF9odG1sRWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiZnJlZXplXCIpO1xuICBjb25zdCBmb2N1c2FibGUgPSBfaHRtbEVsZW0ucXVlcnlTZWxlY3RvckFsbChcbiAgICBgW3RhYmluZGV4PVwiLTFcIl0ke19leGNsdWRlU2VsZWN0b3J9YFxuICApO1xuICBmb3IgKGNvbnN0IGVsZW0gb2YgZm9jdXNhYmxlKSB7XG4gICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIjBcIik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFwcGVuZChfZWxlbVR5cGUsIF9jbGFzc2VzLCBfcGFyZW50RWxlbSwgX3RleHRDb250ZW50KSB7XG4gIC8vIElmIF9lbGVtVHlwZSBpcyBhIHN0cmluZywgY3JlYXRlIGl0OyBvdGhlcndpc2UgYXNzdW1lIGl0J3MgYW4gZXhpc3RpbmdcbiAgLy8gZWxlbWVudCBhbmQgdXNlIGl0IGFzIHBhc3NlZC5cbiAgbGV0IGVsZW07XG4gIGlmICh0eXBlb2YgX2VsZW1UeXBlID09IFwic3RyaW5nXCIpIHtcbiAgICBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChfZWxlbVR5cGUpO1xuICB9IGVsc2Uge1xuICAgIGVsZW0gPSBfZWxlbVR5cGU7XG4gIH1cblxuICBhZGRDbGFzc2VzKGVsZW0sIF9jbGFzc2VzKTtcblxuICBpZiAoX3RleHRDb250ZW50KSB7XG4gICAgZWxlbS50ZXh0Q29udGVudCA9IF90ZXh0Q29udGVudDtcbiAgfVxuXG4gIF9wYXJlbnRFbGVtLmFwcGVuZENoaWxkKGVsZW0pO1xuXG4gIHJldHVybiBlbGVtO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFkaW9WYWx1ZShfZmllbGRzZXQpIHtcbiAgY29uc3QgcmFkaW9zID0gX2ZpZWxkc2V0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHJhZGlvcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChyYWRpb3NbaV0uY2hlY2tlZCkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0SW5wdXRBdHRyaWJ1dGVzKF9lbGVtLCBfdHlwZSwgX25hbWVJZCwgX3ZhbHVlKSB7XG4gIGlmIChfdHlwZSkgX2VsZW0uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBfdHlwZSk7XG5cbiAgaWYgKF9uYW1lSWQpIHtcbiAgICBfZWxlbS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIF9uYW1lSWQpO1xuICAgIF9lbGVtLnNldEF0dHJpYnV0ZShcImlkXCIsIF9uYW1lSWQpO1xuICB9XG5cbiAgaWYgKF92YWx1ZSkgX2VsZW0uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgX3ZhbHVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJhZGlvRmllbGQoX25hbWUsIF9kZWZhdWx0VmFsdWUsIF9sYWJlbEFycikge1xuICBjb25zdCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKTtcbiAgZmllbGQuY2xhc3NMaXN0LmFkZChgJHtfbmFtZX0tZmllbGRzZXRgKTtcblxuICBjb25zdCByYWRpb3MgPSBbXTtcbiAgY29uc3QgbGFiZWxzID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBfbGFiZWxBcnIubGVuZ3RoOyBpKyspIHtcbiAgICByYWRpb3MucHVzaChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIikpO1xuICAgIHJhZGlvc1tpXS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwicmFkaW9cIik7XG4gICAgcmFkaW9zW2ldLnNldEF0dHJpYnV0ZShcImlkXCIsIGAke19uYW1lfS0ke2l9YCk7XG4gICAgcmFkaW9zW2ldLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgX25hbWUpO1xuICAgIHJhZGlvc1tpXS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBfbGFiZWxBcnJbaV0pO1xuICAgIGZpZWxkLmFwcGVuZENoaWxkKHJhZGlvc1tpXSk7XG5cbiAgICBsYWJlbHMucHVzaChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIikpO1xuICAgIGxhYmVsc1tpXS5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgYCR7X25hbWV9LSR7aX1gKTtcbiAgICBsYWJlbHNbaV0udGV4dENvbnRlbnQgPSBfbGFiZWxBcnJbaV07XG4gICAgZmllbGQuYXBwZW5kQ2hpbGQobGFiZWxzW2ldKTtcbiAgfVxuXG4gIHJhZGlvc1tfZGVmYXVsdFZhbHVlXS5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIFwiXCIpO1xuXG4gIHJldHVybiBmaWVsZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN2ZyhfcGF0aCwgX3RpdGxlLCBfY2xhc3NlcywgX3BhdGhDbGFzc2VzKSB7XG4gIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICBzdmcuc2V0QXR0cmlidXRlKFwidmlld0JveFwiLCBcIjAgMCAyNCAyNFwiKTtcblxuICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwidGl0bGVcIik7XG4gIHRpdGxlLnRleHRDb250ZW50ID0gX3RpdGxlO1xuICBzdmcuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICBjb25zdCBwYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJwYXRoXCIpO1xuICBwYXRoLnNldEF0dHJpYnV0ZShcImRcIiwgX3BhdGgpO1xuICBzdmcuYXBwZW5kQ2hpbGQocGF0aCk7XG5cbiAgYWRkQ2xhc3NlcyhzdmcsIF9jbGFzc2VzKTtcbiAgYWRkQ2xhc3NlcyhwYXRoLCBfcGF0aENsYXNzZXMpO1xuXG4gIHJldHVybiBzdmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDbGFzc2VzKF9lbGVtLCBfY2xhc3Nlcykge1xuICBpZiAoX2NsYXNzZXMpIHtcbiAgICAvLyBDYW4gcGFzcyBhcnJheSBvZiBzdHJpbmdzIG9yIHNpbmdsZSBzdHJpbmcuXG4gICAgaWYgKHR5cGVvZiBfY2xhc3NlcyA9PSBcInN0cmluZ1wiKSB7XG4gICAgICBfZWxlbS5jbGFzc0xpc3QuYWRkKF9jbGFzc2VzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgX2VsZW0uY2xhc3NMaXN0LmFkZCguLi5fY2xhc3Nlcyk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub2RlTGlzdENvbnRhaW5zQ2xhc3MoX25vZGVMaXN0LCBfY2xhc3MpIHtcbiAgZm9yIChjb25zdCBlbGVtIG9mIF9ub2RlTGlzdCkge1xuICAgIGlmIChlbGVtLmNsYXNzTGlzdC5jb250YWlucyhfY2xhc3MpKSByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vZGVMaXN0Q29udGFpbnNFbGVtZW50KF9ub2RlTGlzdCwgX2VsZW0pIHtcbiAgZm9yIChjb25zdCBsaXN0RWxlbSBvZiBfbm9kZUxpc3QpIHtcbiAgICBpZiAobGlzdEVsZW0gPT09IF9lbGVtKSByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVsZW1lbnRDb250YWluc0VsZW1lbnQoX2VsZW0xLCBfZWxlbTIpIHtcbiAgY29uc3QgY29udGVudHMgPSBfZWxlbTEucXVlcnlTZWxlY3RvckFsbChcIipcIik7XG5cbiAgZm9yIChjb25zdCBlbGVtVG9DaGVjayBvZiBjb250ZW50cykge1xuICAgIGlmIChlbGVtVG9DaGVjayA9PT0gX2VsZW0yKSByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVsZW1lbnRJc09yQ29udGFpbnNFbGVtZW50KF9lbGVtMSwgX2VsZW0yKSB7XG4gIGlmIChfZWxlbTEgPT09IF9lbGVtMikgcmV0dXJuIHRydWU7XG4gIHJldHVybiBlbGVtZW50Q29udGFpbnNFbGVtZW50KF9lbGVtMSwgX2VsZW0yKTtcbn1cbiIsImltcG9ydCB7XG4gIGNyZWF0ZVN2ZyxcbiAgZWxlbWVudElzT3JDb250YWluc0VsZW1lbnQsXG4gIG5vZGVMaXN0Q29udGFpbnNDbGFzcyxcbiAgbm9kZUxpc3RDb250YWluc0VsZW1lbnQsXG59IGZyb20gXCIuL2RvbS11dGlsaXRpZXMuanNcIjtcblxuY29uc3QgZGVmYXVsdEhvdmVyRGVsYXkgPSA1MDA7XG5cbmNsYXNzIERyb3Bkb3duQmFyIHtcbiAgZHJvcGRvd25zID0gW107XG4gIGh0bWxCYXI7XG5cbiAgLy8gX2h0bWxCYXIgaXMgYSA8ZGl2IGNsYXNzPVwiZHJvcGRvd24tYmFyXCI+IGNvbnRhaW5pbmcgYXQgbGVhc3Qgb25lIGJ1dHRvbiBvclxuICAvLyBkaXYgb2YgY2xhc3MgXCJkcm9wZG93bi1hbmNob3JcIi5cbiAgY29uc3RydWN0b3IoX2h0bWxCYXIpIHtcbiAgICB0aGlzLmh0bWxCYXIgPSBfaHRtbEJhcjtcbiAgICBjb25zdCBodG1sTWVudXMgPSBfaHRtbEJhci5xdWVyeVNlbGVjdG9yQWxsKFwiLmRyb3Bkb3duLWFuY2hvclwiKTtcblxuICAgIGh0bWxNZW51cy5mb3JFYWNoKChfZWxlbSkgPT4ge1xuICAgICAgdGhpcy5kcm9wZG93bnMucHVzaChuZXcgRHJvcGRvd24oX2VsZW0pKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYXR0YWNoTW91c2VFbnRlckxpc3RlbmVycygpO1xuICB9XG5cbiAgYXR0YWNoTW91c2VFbnRlckxpc3RlbmVycygpIHtcbiAgICB0aGlzLmRyb3Bkb3ducy5mb3JFYWNoKChfZHJvcGRvd24pID0+IHtcbiAgICAgIHRoaXMuYXR0YWNoTW91c2VFbnRlckxpc3RlbmVyKF9kcm9wZG93bik7XG4gICAgfSk7XG4gIH1cblxuICBhdHRhY2hNb3VzZUVudGVyTGlzdGVuZXIoX2Ryb3Bkb3duKSB7XG4gICAgY29uc3QgYW5jaG9yID0gX2Ryb3Bkb3duLmdldEFuY2hvcigpO1xuXG4gICAgYW5jaG9yLmh0bWxFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsICgpID0+IHtcbiAgICAgIHRoaXMuc3dpdGNoT3BlbmVkRHJvcGRvd25zKF9kcm9wZG93bik7XG4gICAgfSk7XG4gIH1cblxuICBzd2l0Y2hPcGVuZWREcm9wZG93bnMoX3RhcmdldERyb3Bkb3duKSB7XG4gICAgY29uc3QgdGFyZ2V0QW5jaG9yID0gX3RhcmdldERyb3Bkb3duLmdldEFuY2hvcigpO1xuXG4gICAgaWYgKHRhcmdldEFuY2hvci5pc0VuYWJsZWQoKSkge1xuICAgICAgY29uc3QgbmVlZE1lbnVPcGVuID0gdGhpcy5jbG9zZU9wZW5lZERyb3Bkb3ducyhbX3RhcmdldERyb3Bkb3duXSk7XG5cbiAgICAgIGlmIChuZWVkTWVudU9wZW4pIHtcbiAgICAgICAgdGFyZ2V0QW5jaG9yLm9wZW5Ecm9wZG93bigpO1xuICAgICAgICB0YXJnZXRBbmNob3IuaHRtbEVsZW0uY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodGVkXCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsb3NlT3BlbmVkRHJvcGRvd25zKF9rZWVwT3Blbikge1xuICAgIGxldCBudW1DbG9zZWQgPSAwO1xuXG4gICAgdGhpcy5kcm9wZG93bnMuZm9yRWFjaCgoX21lbnUpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIV9rZWVwT3Blbi5pbmNsdWRlcyhfbWVudSkgJiZcbiAgICAgICAgX21lbnUuZ2V0QW5jaG9yKCkuaHRtbEVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwib3BlbmVkXCIpXG4gICAgICApIHtcbiAgICAgICAgbnVtQ2xvc2VkKys7XG4gICAgICAgIF9tZW51LmNsb3NlSGllcmFyY2h5KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbnVtQ2xvc2VkO1xuICB9XG59XG5cbmNsYXNzIERyb3Bkb3duIHtcbiAgb3JpZ2lucyA9IFtdO1xuICBob3ZlckRlbGF5O1xuICBodG1sQW5jaG9yO1xuXG4gIC8vIF9odG1sRHJvcGRvd25BbmNob3IgaXMgYSA8ZGl2IGNsYXNzPVwiZHJvcGRvd24tYW5jaG9yXCI+IG9yXG4gIC8vIDxidXR0b24gY2xhc3M9XCJkcm9wZG93bi1hbmNob3JcIj4gdGhhdCBjb250YWlucyBhdCBsZWFzdCBvbmUgPHVsPiB3aXRoIG1lbnVcbiAgLy8gaXRlbSBkYXRhLlxuICBjb25zdHJ1Y3RvcihfaHRtbERyb3Bkb3duQW5jaG9yKSB7XG4gICAgdGhpcy5odG1sQW5jaG9yID0gX2h0bWxEcm9wZG93bkFuY2hvcjtcbiAgICB0aGlzLmhvdmVyRGVsYXkgPVxuICAgICAgX2h0bWxEcm9wZG93bkFuY2hvci5nZXRBdHRyaWJ1dGUoXCJob3ZlcmRlbGF5XCIpIHx8IGRlZmF1bHRIb3ZlckRlbGF5O1xuXG4gICAgLy8gVGhlIGRyb3Bkb3duJ3MgYW5jaG9yIGlzIGFsd2F5cyBhdCB0aGlzLm9yaWdpbnNbMF0uXG4gICAgdGhpcy5vcmlnaW5zLnB1c2gobmV3IERyb3Bkb3duT3JpZ2luKF9odG1sRHJvcGRvd25BbmNob3IsIHRoaXMuaG92ZXJEZWxheSkpO1xuICAgIGNvbnN0IHN1Ym9yaWdpbnMgPSBfaHRtbERyb3Bkb3duQW5jaG9yLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZHJvcGRvd24tZXhwYW5kXCIpO1xuXG4gICAgZm9yIChjb25zdCBvcmlnaW4gb2Ygc3Vib3JpZ2lucykge1xuICAgICAgdGhpcy5vcmlnaW5zLnB1c2gobmV3IERyb3Bkb3duT3JpZ2luKG9yaWdpbiwgdGhpcy5ob3ZlckRlbGF5KSk7XG4gICAgfVxuXG4gICAgdGhpcy5hdHRhY2hNb3VzZUVudGVyTGlzdGVuZXIoKTtcbiAgICB0aGlzLmF0dGFjaENsaWNrTGlzdGVuZXIoKTtcbiAgICB0aGlzLmF0dGFjaFJlc2l6ZUxpc3RlbmVyKCk7XG4gICAgdGhpcy5hdHRhY2hDbG9zZU9uU2VsZWN0TGlzdGVuZXJzKCk7XG4gIH1cblxuICBnZXRBbmNob3IoKSB7XG4gICAgcmV0dXJuIHRoaXMub3JpZ2luc1swXTtcbiAgfVxuXG4gIGNsb3NlSGllcmFyY2h5KCkge1xuICAgIHRoaXMub3JpZ2lucy5mb3JFYWNoKChfb3JpZ2luKSA9PiB7XG4gICAgICBfb3JpZ2luLmh0bWxFbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWdobGlnaHRlZFwiKTtcbiAgICAgIF9vcmlnaW4uaHRtbEVsZW0uY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5lZFwiKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlRGVlcGVyVGhhbk1vdXNlKF9tb3VzZVgsIF9tb3VzZVksIF9pbW1lZGlhdGUpIHtcbiAgICBjb25zdCB1bmRlck1vdXNlID0gZG9jdW1lbnQuZWxlbWVudHNGcm9tUG9pbnQoX21vdXNlWCwgX21vdXNlWSk7XG4gICAgbGV0IG1lbnVVbmRlck1vdXNlO1xuXG4gICAgLy8gRmluZCB0aGUgYWN0dWFsIEhUTUwgZWxlbWVudCBmb3IgdGhpcyBkcm9wZG93bi4gQ2FuJ3QganVzdCB1c2VcbiAgICAvLyBfZXZlbnQudGFyZ2V0IGJlY2F1c2UgdGhhdCBnaXZlcyB1cyB0aGUgYW5jaG9yIGVsZW1lbnQsIG5vdCB0aGVcbiAgICAvLyBzdWJtZW51IGVsZW1lbnQuXG4gICAgZm9yIChjb25zdCBlbGVtIG9mIHVuZGVyTW91c2UpIHtcbiAgICAgIGlmIChlbGVtLmNsYXNzTGlzdC5jb250YWlucyhcImRyb3Bkb3duXCIpKSB7XG4gICAgICAgIG1lbnVVbmRlck1vdXNlID0gZWxlbTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFtZW51VW5kZXJNb3VzZSkgcmV0dXJuO1xuXG4gICAgY29uc3Qgc3VibWVudXMgPSBtZW51VW5kZXJNb3VzZS5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgXCIuZHJvcGRvd24tZXhwYW5kLCAuZHJvcGRvd24tYW5jaG9yXCJcbiAgICApO1xuXG4gICAgLy8gVW5oaWdobGlnaHQvY2xvc2UgYW55IG1lbnVzIGRlZXBlciB0aGFuIHRoZSBtZW51IHRoZSBtb3VzZSBtb3ZlZCBpbnRvLlxuICAgIGZvciAoY29uc3Qgc3VibWVudSBvZiBzdWJtZW51cykge1xuICAgICAgaWYgKF9pbW1lZGlhdGUpIHtcbiAgICAgICAgaWYgKCFzdWJtZW51LmNsYXNzTGlzdC5jb250YWlucyhcImhpZ2hsaWdodGVkXCIpKSB7XG4gICAgICAgICAgc3VibWVudS5jbGFzc0xpc3QucmVtb3ZlKFwib3BlbmVkXCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJtZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWdobGlnaHRlZFwiKTtcbiAgICAgICAgc3VibWVudS5tZW51Q2xvc2VUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKCFzdWJtZW51LmNsYXNzTGlzdC5jb250YWlucyhcImhpZ2hsaWdodGVkXCIpKSB7XG4gICAgICAgICAgICBzdWJtZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuZWRcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzLmhvdmVyRGVsYXkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIExpc3RlbiBmb3IgY2xpY2tzIG91dHNpZGUgb2YgdGhlIG1lbnUgaGllcmFyY2h5IGFuZCBjbG9zZSB0aGUgZW50aXJlXG4gIC8vIGhpZXJhcmNoeSBpZiBvbmUgb2NjdXJzLlxuICBjbG9zZU9uQ2xpY2tPdXRzaWRlSGllcmFyY2h5KF9jbGlja1RhcmdldCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuaHRtbEFuY2hvci5jbGFzc0xpc3QuY29udGFpbnMoXCJvcGVuZWRcIikgJiZcbiAgICAgICFlbGVtZW50SXNPckNvbnRhaW5zRWxlbWVudCh0aGlzLmh0bWxBbmNob3IsIF9jbGlja1RhcmdldClcbiAgICApIHtcbiAgICAgIHRoaXMuY2xvc2VIaWVyYXJjaHkoKTtcbiAgICB9XG4gIH1cblxuICByZXBvc2l0aW9uT2Zmc2NyZWVuRHJvcGRvd25zKCkge1xuICAgIGlmICh0aGlzLmdldEFuY2hvcigpLmh0bWxFbGVtLmNsYXNzTGlzdC5jb250YWlucyhcIm9wZW5lZFwiKSkge1xuICAgICAgdGhpcy5nZXRBbmNob3IoKS5yZXBvc2l0aW9uT2Zmc2NyZWVuTWVudSgpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMub3JpZ2lucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodGhpcy5vcmlnaW5zW2ldLmh0bWxFbGVtLmNsYXNzTGlzdC5jb250YWlucyhcIm9wZW5lZFwiKSkge1xuICAgICAgICAgIHRoaXMub3JpZ2luc1tpXS5yZXBvc2l0aW9uT2Zmc2NyZWVuTWVudSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXR0YWNoTW91c2VFbnRlckxpc3RlbmVyKCkge1xuICAgIHRoaXMuaHRtbEFuY2hvci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCAoX2V2ZW50KSA9PiB7XG4gICAgICB0aGlzLmNsb3NlRGVlcGVyVGhhbk1vdXNlKF9ldmVudC5jbGllbnRYLCBfZXZlbnQuY2xpZW50WSwgZmFsc2UpO1xuICAgIH0pO1xuICB9XG5cbiAgYXR0YWNoQ2xpY2tMaXN0ZW5lcigpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChfZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuY2xvc2VPbkNsaWNrT3V0c2lkZUhpZXJhcmNoeShfZXZlbnQudGFyZ2V0KTtcbiAgICAgIHRoaXMuY2xvc2VEZWVwZXJUaGFuTW91c2UoX2V2ZW50LmNsaWVudFgsIF9ldmVudC5jbGllbnRZLCB0cnVlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFdlIGF0dGFjaCB0aGUgcmVzaXplIGxpc3RlbmVyIHRvIERyb3Bkb3duIGluc3RlYWQgb2YgaW5kaXZpZHVhbFxuICAvLyBEcm9wZG93bk9yaWdpbnMgdG8gcmVkdWNlIHRoZSBudW1iZXIgb2YgY2hlY2tzIG1hZGUgb24gcmVzaXplIGJ5IGNsb3NlZFxuICAvLyBtZW51cy5cbiAgYXR0YWNoUmVzaXplTGlzdGVuZXIoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcInJlc2l6ZVwiLFxuICAgICAgdGhpcy5yZXBvc2l0aW9uT2Zmc2NyZWVuRHJvcGRvd25zLmJpbmQodGhpcylcbiAgICApO1xuICB9XG5cbiAgYXR0YWNoQ2xvc2VPblNlbGVjdExpc3RlbmVycygpIHtcbiAgICBjb25zdCBpdGVtRGl2cyA9IHRoaXMuaHRtbEFuY2hvci5xdWVyeVNlbGVjdG9yQWxsKFwidWwgPiBkaXY6Zmlyc3Qtb2YtdHlwZVwiKTtcblxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtRGl2cykge1xuICAgICAgaWYgKFxuICAgICAgICBpdGVtLmdldEF0dHJpYnV0ZShcImNsb3Nlb25zZWxlY3RcIikgPT09IFwidHJ1ZVwiICYmXG4gICAgICAgIGl0ZW0uZ2V0QXR0cmlidXRlKFwiZW5hYmxlZFwiKSAhPT0gXCJmYWxzZVwiXG4gICAgICApIHtcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChfZXZlbnQpID0+IHtcbiAgICAgICAgICBpZiAoX2V2ZW50LmJ1dHRvbiA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZUhpZXJhcmNoeSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIERyb3Bkb3duT3JpZ2luIHtcbiAgZW50ZXJUaW1lO1xuICBodG1sRWxlbTtcbiAgbWVudUVsZW07XG4gIGl0ZW1FbGVtO1xuICBtZW51SXRlbVVscztcbiAgbWVudUl0ZW1EaXZzID0gW107XG4gIG1lbnVPcGVuVGltZW91dDtcbiAgbWVudUNsb3NlVGltZW91dDtcbiAgaG92ZXJEZWxheTtcbiAgcG9wRGlyZWN0aW9uO1xuICBhcHBlYXJBbmltUnVubmluZyA9IGZhbHNlO1xuXG4gIHN0YXRpYyBwb3NpdGlvbk9mZnNldFZhbHVlcyA9IHtcbiAgICBuZWdhdGl2ZUFuY2hvckhvcml6Qm9yZGVyT2Zmc2V0OlxuICAgICAgXCJjYWxjKHZhcigtLWRyb3Bkb3duLWFuY2hvci1ib3JkZXItd2lkdGgtaG9yaXopICogLTEpXCIsXG4gICAgbmVnYXRpdmVBbmNob3JWZXJ0Qm9yZGVyT2Zmc2V0OlxuICAgICAgXCJjYWxjKHZhcigtLWRyb3Bkb3duLWFuY2hvci1ib3JkZXItd2lkdGgtdmVydCkgKiAtMSlcIixcbiAgICBuZWdhdGl2ZUJvcmRlck9mZnNldDogXCJjYWxjKHZhcigtLWRyb3Bkb3duLWJvcmRlci13aWR0aCkgKiAtMSlcIixcbiAgICBmdWxsT2Zmc2V0OiBcIjEwMCVcIixcbiAgfTtcblxuICBzdGF0aWMgaW52ZXJ0ZWREaXJlY3Rpb25zID0ge1xuICAgIHRvcDogXCJib3R0b21cIixcbiAgICBib3R0b206IFwidG9wXCIsXG4gICAgcmlnaHQ6IFwibGVmdFwiLFxuICAgIGxlZnQ6IFwicmlnaHRcIixcbiAgfTtcblxuICBjb25zdHJ1Y3RvcihfaHRtbEVsZW0sIF9ob3ZlckRlbGF5KSB7XG4gICAgdGhpcy5odG1sRWxlbSA9IF9odG1sRWxlbTtcbiAgICB0aGlzLm1lbnVFbGVtID0gX2h0bWxFbGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZHJvcGRvd25cIik7XG4gICAgdGhpcy5tZW51SXRlbVVscyA9IHRoaXMuZ2V0QWxsVWxzQXRUaGlzRHJvcGRvd25MZXZlbCgpO1xuICAgIGxldCBwb3BEaXI7XG5cbiAgICBpZiAoIV9odG1sRWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJkcm9wZG93bi1hbmNob3JcIikpIHtcbiAgICAgIHBvcERpciA9IF9odG1sRWxlbS5nZXRBdHRyaWJ1dGUoXCJwb3BkaXJlY3Rpb25cIikgfHwgXCJyaWdodC1ib3R0b21cIjtcbiAgICAgIHRoaXMuYXBwZW5kU3VibWVudUFycm93KCk7XG4gICAgICB0aGlzLml0ZW1FbGVtID0gX2h0bWxFbGVtLnF1ZXJ5U2VsZWN0b3IoXCJ1bCA+IGRpdjpmaXJzdC1vZi10eXBlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwb3BEaXIgPSBfaHRtbEVsZW0uZ2V0QXR0cmlidXRlKFwicG9wZGlyZWN0aW9uXCIpIHx8IFwiYm90dG9tLXJpZ2h0dFwiO1xuICAgICAgdGhpcy5pdGVtRWxlbSA9IF9odG1sRWxlbS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICBcIi5kcm9wZG93bi1hbmNob3IgPiBkaXY6Zmlyc3Qtb2YtdHlwZVwiXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMucG9wRGlyZWN0aW9uID0gcG9wRGlyLnNwbGl0KFwiLVwiKTtcbiAgICB0aGlzLmhvdmVyRGVsYXkgPSBfaG92ZXJEZWxheSB8fCBkZWZhdWx0SG92ZXJEZWxheTtcblxuICAgIHRoaXMuYXR0YWNoTW91c2VFbnRlckxpc3RlbmVyKF9odG1sRWxlbS5nZXRBdHRyaWJ1dGUoXCJvbnNldFwiKSAhPT0gXCJjbGlja1wiKTtcbiAgICB0aGlzLmF0dGFjaENsaWNrTGlzdGVuZXIoKTtcbiAgICB0aGlzLmF0dGFjaE1vdXNlTGVhdmVMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLmF0dGFjaEFuaW1MaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGdldEFsbFVsc0F0VGhpc0Ryb3Bkb3duTGV2ZWwoKSB7XG4gICAgY29uc3QgdWxzID0gW3RoaXMubWVudUVsZW0ucXVlcnlTZWxlY3RvcihcInVsXCIpXTtcbiAgICBsZXQgbmV4dFVsID0gdWxzWzBdLm5leHRTaWJsaW5nO1xuXG4gICAgd2hpbGUgKG5leHRVbCkge1xuICAgICAgaWYgKFxuICAgICAgICBuZXh0VWwubm9kZVR5cGUgPT09IDEgJiZcbiAgICAgICAgIW5leHRVbC5jbGFzc0xpc3QuY29udGFpbnMoXCJkcm9wZG93bi1zcGFjZXJcIilcbiAgICAgICkge1xuICAgICAgICB1bHMucHVzaChuZXh0VWwpO1xuICAgICAgfVxuXG4gICAgICBuZXh0VWwgPSBuZXh0VWwubmV4dFNpYmxpbmc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVscztcbiAgfVxuXG4gIGFwcGVuZFN1Ym1lbnVBcnJvdygpIHtcbiAgICBjb25zdCBtZW51ID0gdGhpcy5odG1sRWxlbS5xdWVyeVNlbGVjdG9yKFwiLmRyb3Bkb3duXCIpO1xuICAgIGlmICghbWVudSkgcmV0dXJuO1xuXG4gICAgY29uc3Qgc3ZnID0gY3JlYXRlU3ZnKFwiTTEwLDE3TDE1LDEyTDEwLDdWMTdaXCIpO1xuICAgIHN2Zy5jbGFzc0xpc3QuYWRkKFwiZHJvcGRvd24tZXhwYW5kLWltZ1wiKTtcbiAgICB0aGlzLmh0bWxFbGVtLmluc2VydEJlZm9yZShzdmcsIG1lbnUpO1xuICB9XG5cbiAgc2V0TWVudVRvRGVmYXVsdFBvc2l0aW9uKCkge1xuICAgIGxldCBzZWNvbmRPZmZzZXQ7XG5cbiAgICAvLyBPZmZzZXQgaW4gdGhlIGZpcnN0IGRpcmVjdGlvbiBkb2VzIG5vdCBjb3JyZWN0IGZvciBib3JkZXIgd2lkdGg7IG9mZnNldFxuICAgIC8vIGluIHRoZSBzZWNvbmQgZGlyZWN0aW9uIGRvZXMuIEFuIGFuY2hvciBtYXkgaGF2ZSBzZXBhcmF0ZSBob3Jpem9udGFsIGFuZFxuICAgIC8vIHZlcnRpY2FsIGJvcmRlciB3aWR0aHMuXG4gICAgaWYgKHRoaXMuaHRtbEVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZHJvcGRvd24tYW5jaG9yXCIpKSB7XG4gICAgICBpZiAodGhpcy5wb3BEaXJlY3Rpb25bMV0gPT09IFwicmlnaHRcIiB8fCB0aGlzLnBvcERpcmVjdGlvblsxXSA9PT0gXCJsZWZ0XCIpIHtcbiAgICAgICAgc2Vjb25kT2Zmc2V0ID1cbiAgICAgICAgICBEcm9wZG93bk9yaWdpbi5wb3NpdGlvbk9mZnNldFZhbHVlcy5uZWdhdGl2ZUFuY2hvckhvcml6Qm9yZGVyT2Zmc2V0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2Vjb25kT2Zmc2V0ID1cbiAgICAgICAgICBEcm9wZG93bk9yaWdpbi5wb3NpdGlvbk9mZnNldFZhbHVlcy5uZWdhdGl2ZUFuY2hvclZlcnRCb3JkZXJPZmZzZXQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlY29uZE9mZnNldCA9IERyb3Bkb3duT3JpZ2luLnBvc2l0aW9uT2Zmc2V0VmFsdWVzLm5lZ2F0aXZlQm9yZGVyT2Zmc2V0O1xuICAgIH1cblxuICAgIGNvbnN0IGludkRpciA9IFtcbiAgICAgIERyb3Bkb3duT3JpZ2luLmludmVydGVkRGlyZWN0aW9uc1t0aGlzLnBvcERpcmVjdGlvblswXV0sXG4gICAgICBEcm9wZG93bk9yaWdpbi5pbnZlcnRlZERpcmVjdGlvbnNbdGhpcy5wb3BEaXJlY3Rpb25bMV1dLFxuICAgIF07XG5cbiAgICB0aGlzLm1lbnVFbGVtLnN0eWxlW3RoaXMucG9wRGlyZWN0aW9uWzBdXSA9IFwiXCI7XG4gICAgdGhpcy5tZW51RWxlbS5zdHlsZVtpbnZEaXJbMF1dID1cbiAgICAgIERyb3Bkb3duT3JpZ2luLnBvc2l0aW9uT2Zmc2V0VmFsdWVzLmZ1bGxPZmZzZXQ7XG4gICAgdGhpcy5tZW51RWxlbS5zdHlsZVt0aGlzLnBvcERpcmVjdGlvblsxXV0gPSBcIlwiO1xuICAgIHRoaXMubWVudUVsZW0uc3R5bGVbaW52RGlyWzFdXSA9IHNlY29uZE9mZnNldDtcbiAgICB0aGlzLm1lbnVFbGVtLnN0eWxlW1widHJhbnNmb3JtLW9yaWdpblwiXSA9IGAke2ludkRpclswXX0gJHtpbnZEaXJbMV19YDtcbiAgfVxuXG4gIHJlcG9zaXRpb25PZmZzY3JlZW5NZW51KCkge1xuICAgIGNvbnN0IHNjcmVlbkVkZ2VNYXJnaW4gPSA1O1xuICAgIHRoaXMuc2V0TWVudVRvRGVmYXVsdFBvc2l0aW9uKCk7XG5cbiAgICBjb25zdCB2dyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICBjb25zdCB2aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHwgd2luZG93LmlubmVySGVpZ2h0O1xuICAgIGNvbnN0IHJlY3QgPSB0aGlzLm1lbnVFbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IGxlZnRTdHIgPSB3aW5kb3dcbiAgICAgIC5nZXRDb21wdXRlZFN0eWxlKHRoaXMubWVudUVsZW0pXG4gICAgICAuZ2V0UHJvcGVydHlWYWx1ZShcImxlZnRcIik7XG4gICAgY29uc3QgbGVmdE51bSA9IE51bWJlcihsZWZ0U3RyLnJlcGxhY2UoXCJweFwiLCBcIlwiKSk7XG4gICAgY29uc3QgdG9wU3RyID0gd2luZG93XG4gICAgICAuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm1lbnVFbGVtKVxuICAgICAgLmdldFByb3BlcnR5VmFsdWUoXCJ0b3BcIik7XG4gICAgY29uc3QgdG9wTnVtID0gTnVtYmVyKHRvcFN0ci5yZXBsYWNlKFwicHhcIiwgXCJcIikpO1xuXG4gICAgaWYgKHJlY3QubGVmdCA8PSBzY3JlZW5FZGdlTWFyZ2luKSB7XG4gICAgICB0aGlzLm1lbnVFbGVtLnN0eWxlLmxlZnQgPSBgJHtsZWZ0TnVtIC0gcmVjdC5sZWZ0ICsgc2NyZWVuRWRnZU1hcmdpbn1weGA7XG4gICAgfSBlbHNlIGlmIChyZWN0LnJpZ2h0ID49IHZ3IC0gc2NyZWVuRWRnZU1hcmdpbikge1xuICAgICAgdGhpcy5tZW51RWxlbS5zdHlsZS5sZWZ0ID0gYCR7bGVmdE51bSAtIChyZWN0LnJpZ2h0IC0gdncgKyBzY3JlZW5FZGdlTWFyZ2luKX1weGA7XG4gICAgfVxuXG4gICAgaWYgKHJlY3QudG9wIDw9IHNjcmVlbkVkZ2VNYXJnaW4pIHtcbiAgICAgIHRoaXMubWVudUVsZW0uc3R5bGUudG9wID0gYCR7dG9wTnVtIC0gcmVjdC50b3AgKyBzY3JlZW5FZGdlTWFyZ2lufXB4YDtcbiAgICB9IGVsc2UgaWYgKHJlY3QuYm90dG9tID49IHZoIC0gc2NyZWVuRWRnZU1hcmdpbikge1xuICAgICAgdGhpcy5tZW51RWxlbS5zdHlsZS50b3AgPSBgJHt0b3BOdW0gLSAocmVjdC5ib3R0b20gLSB2aCArIHNjcmVlbkVkZ2VNYXJnaW4pfXB4YDtcbiAgICB9XG4gIH1cblxuICBpc0VuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbUVsZW0uZ2V0QXR0cmlidXRlKFwiZW5hYmxlZFwiKSAhPT0gXCJmYWxzZVwiO1xuICB9XG5cbiAgb3BlbkRyb3Bkb3duKCkge1xuICAgIHRoaXMuaHRtbEVsZW0uY2xhc3NMaXN0LmFkZChcIm9wZW5lZFwiKTtcbiAgICB0aGlzLnJlcG9zaXRpb25PZmZzY3JlZW5NZW51KCk7XG5cbiAgICB0aGlzLm1lbnVJdGVtRGl2cy5mb3JFYWNoKChfZGl2KSA9PiB7XG4gICAgICBfZGl2LmNsYXNzTGlzdC5yZW1vdmUoXCJtb3VzZW92ZXJcIik7XG4gICAgfSk7XG5cbiAgICB0aGlzLml0ZW1FbGVtLmNsYXNzTGlzdC5hZGQoXCJtb3VzZW92ZXJcIik7XG4gIH1cblxuICBzY2hlZHVsZU9wZW5NZW51KCkge1xuICAgIGlmICh0aGlzLmlzRW5hYmxlZCgpKSB7XG4gICAgICB0aGlzLmh0bWxFbGVtLmNsYXNzTGlzdC5hZGQoXCJoaWdobGlnaHRlZFwiKTtcbiAgICAgIHRoaXMubWVudU9wZW5UaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5odG1sRWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJvcGVuZWRcIikpIHtcbiAgICAgICAgICB0aGlzLm9wZW5Ecm9wZG93bigpO1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLm1lbnVDbG9zZVRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzLmhvdmVyRGVsYXkpO1xuICAgIH1cbiAgfVxuXG4gIHNjaGVkdWxlQ2xvc2VNZW51KF9tb3VzZVgsIF9tb3VzZVkpIHtcbiAgICBpZiAodGhpcy5pc0VuYWJsZWQoKSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubWVudU9wZW5UaW1lb3V0KTtcblxuICAgICAgY29uc3QgdW5kZXJNb3VzZSA9IGRvY3VtZW50LmVsZW1lbnRzRnJvbVBvaW50KF9tb3VzZVgsIF9tb3VzZVkpO1xuXG4gICAgICBpZiAobm9kZUxpc3RDb250YWluc0NsYXNzKHVuZGVyTW91c2UsIFwiZHJvcGRvd25cIikpIHtcbiAgICAgICAgdGhpcy5odG1sRWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlnaGxpZ2h0ZWRcIik7XG4gICAgICAgIHRoaXMubWVudUNsb3NlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmICghdGhpcy5odG1sRWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJoaWdobGlnaHRlZFwiKSkge1xuICAgICAgICAgICAgdGhpcy5odG1sRWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwib3BlbmVkXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcy5ob3ZlckRlbGF5KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0b2dnbGVPcGVuTWVudShfbW91c2VYLCBfbW91c2VZKSB7XG4gICAgaWYgKHRoaXMuaXNFbmFibGVkKCkpIHtcbiAgICAgIGNvbnN0IHVuZGVyTW91c2UgPSBkb2N1bWVudC5lbGVtZW50c0Zyb21Qb2ludChfbW91c2VYLCBfbW91c2VZKTtcblxuICAgICAgaWYgKG5vZGVMaXN0Q29udGFpbnNFbGVtZW50KHVuZGVyTW91c2UsIHRoaXMuaHRtbEVsZW0pKSB7XG4gICAgICAgIGlmICh0aGlzLmh0bWxFbGVtLmNsYXNzTGlzdC5jb250YWlucyhcIm9wZW5lZFwiKSkge1xuICAgICAgICAgIHRoaXMuaHRtbEVsZW0uY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5lZFwiKTtcblxuICAgICAgICAgIGlmICh0aGlzLmh0bWxFbGVtLmNsYXNzTGlzdC5jb250YWlucyhcImRyb3Bkb3duLWFuY2hvclwiKSkge1xuICAgICAgICAgICAgdGhpcy5odG1sRWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlnaGxpZ2h0ZWRcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubWVudU9wZW5UaW1lb3V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmh0bWxFbGVtLmNsYXNzTGlzdC5hZGQoXCJoaWdobGlnaHRlZFwiKTtcbiAgICAgICAgICB0aGlzLm9wZW5Ecm9wZG93bigpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLm1lbnVDbG9zZVRpbWVvdXQpO1xuICAgIH1cbiAgfVxuXG4gIGFkZE1vdXNlb3ZlckNsYXNzKF9tZW51SXRlbSkge1xuICAgIGlmIChfbWVudUl0ZW0uZ2V0QXR0cmlidXRlKFwiZW5hYmxlZFwiKSAhPT0gXCJmYWxzZVwiKSB7XG4gICAgICBfbWVudUl0ZW0uY2xhc3NMaXN0LmFkZChcIm1vdXNlb3ZlclwiKTtcbiAgICB9XG4gIH1cblxuICBhdHRhY2hNb3VzZUVudGVyTGlzdGVuZXIoX29wZW5PbkhvdmVyKSB7XG4gICAgdGhpcy5odG1sRWxlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCAoKSA9PiB7XG4gICAgICBpZiAoX29wZW5PbkhvdmVyKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVPcGVuTWVudSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgYXR0YWNoQ2xpY2tMaXN0ZW5lcigpIHtcbiAgICB0aGlzLmh0bWxFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKF9ldmVudCkgPT4ge1xuICAgICAgaWYgKF9ldmVudC5idXR0b24gPT09IDApIHtcbiAgICAgICAgdGhpcy50b2dnbGVPcGVuTWVudShfZXZlbnQuY2xpZW50WCwgX2V2ZW50LmNsaWVudFkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgYXR0YWNoTW91c2VMZWF2ZUxpc3RlbmVycygpIHtcbiAgICB0aGlzLmh0bWxFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIChfZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuc2NoZWR1bGVDbG9zZU1lbnUoX2V2ZW50LmNsaWVudFgsIF9ldmVudC5jbGllbnRZKTtcbiAgICB9KTtcblxuICAgIGZvciAoY29uc3QgdWwgb2YgdGhpcy5tZW51SXRlbVVscykge1xuICAgICAgY29uc3QgbWVudUl0ZW0gPSB1bC5xdWVyeVNlbGVjdG9yKFwiZGl2OmZpcnN0LW9mLXR5cGVcIik7XG4gICAgICB0aGlzLm1lbnVJdGVtRGl2cy5wdXNoKG1lbnVJdGVtKTtcbiAgICAgIHVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5hZGRNb3VzZW92ZXJDbGFzcyhtZW51SXRlbSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBhdHRhY2hBbmltTGlzdGVuZXJzKCkge1xuICAgIHRoaXMubWVudUVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLCAoX2V2ZW50KSA9PiB7XG4gICAgICBpZiAoX2V2ZW50LmFuaW1hdGlvbk5hbWUgPT09IFwiYXBwZWFyXCIpIHtcbiAgICAgICAgdGhpcy5hcHBlYXJBbmltUnVubmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlcG9zaXRpb25PZmZzY3JlZW5NZW51KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLm1lbnVFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25jYW5jZWxcIiwgKF9ldmVudCkgPT4ge1xuICAgICAgaWYgKF9ldmVudC5hbmltYXRpb25OYW1lID09PSBcImFwcGVhclwiKSB7XG4gICAgICAgIHRoaXMuYXBwZWFyQW5pbVJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMubWVudUVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbnN0YXJ0XCIsIChfZXZlbnQpID0+IHtcbiAgICAgIGlmIChfZXZlbnQuYW5pbWF0aW9uTmFtZSA9PT0gXCJhcHBlYXJcIikge1xuICAgICAgICB0aGlzLmFwcGVhckFuaW1SdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy51cGRhdGVNZW51QW5pbVBvc2l0aW9uKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBJZiB0aGlzIGxhZ3MgdGhlIGFuaW1hdGlvbiwgaW5jcmVhc2UgdGhlIHRpbWVvdXQgaW50ZXJ2YWwuXG4gIHVwZGF0ZU1lbnVBbmltUG9zaXRpb24oKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnJlcG9zaXRpb25PZmZzY3JlZW5NZW51KCk7XG5cbiAgICAgIGlmICh0aGlzLmFwcGVhckFuaW1SdW5uaW5nKSB7XG4gICAgICAgIHRoaXMudXBkYXRlTWVudUFuaW1Qb3NpdGlvbigpO1xuICAgICAgfVxuICAgIH0sIDEpO1xuICB9XG59XG5cbi8vIENhbGxpbmcgdGhpcyBmdW5jdGlvbiBmcm9tIHRoZSBjb2RlIHRoYXQgaW1wb3J0cyBpdCB3aWxsIHJlYWQgdGhlIGRyb3Bkb3duXG4vLyBzdHJ1Y3R1cmVzIGluIHRoZSBIVE1MIGFuZCBjb25zdHJ1Y3QgZnVsbCBkcm9wZG93biBtZW51cyBvdXQgb2YgdGhlbS5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgaHRtbE1lbnVCYXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5kcm9wZG93bi1iYXJcIik7XG4gIGNvbnN0IGh0bWxMb25lQW5jaG9ycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgXCIqOm5vdCguZHJvcGRvd24tYmFyKSA+IGRpdi5kcm9wZG93bi1hbmNob3IsICo6bm90KC5kcm9wZG93bi1iYXIpID4gYnV0dG9uLmRyb3Bkb3duLWFuY2hvclwiXG4gICk7XG5cbiAgY29uc3QgYmFycyA9IFtdO1xuICBjb25zdCBhbmNob3JzID0gW107XG5cbiAgaHRtbE1lbnVCYXJzLmZvckVhY2goKF9iYXIpID0+IHtcbiAgICBiYXJzLnB1c2gobmV3IERyb3Bkb3duQmFyKF9iYXIpKTtcbiAgfSk7XG5cbiAgaHRtbExvbmVBbmNob3JzLmZvckVhY2goKF9hbmNob3IpID0+IHtcbiAgICBhbmNob3JzLnB1c2gobmV3IERyb3Bkb3duKF9hbmNob3IpKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBhbmNob3JzLFxuICAgIGJhcnMsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNZW51SXRlbXMoX3NvdXJjZSkge1xuICBpZiAoIV9zb3VyY2UpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcInVsID4gZGl2OmZpcnN0LW9mLXR5cGVcIik7XG4gIH0gZWxzZSBpZiAoX3NvdXJjZSBpbnN0YW5jZW9mIERyb3Bkb3duQmFyKSB7XG4gICAgcmV0dXJuIF9zb3VyY2UuaHRtbEJhci5xdWVyeVNlbGVjdG9yQWxsKFwidWwgPiBkaXY6Zmlyc3Qtb2YtdHlwZVwiKTtcbiAgfSBlbHNlIGlmIChfc291cmNlIGluc3RhbmNlb2YgRHJvcGRvd24pIHtcbiAgICByZXR1cm4gX3NvdXJjZS5odG1sQW5jaG9yLnF1ZXJ5U2VsZWN0b3JBbGwoXCJ1bCA+IGRpdjpmaXJzdC1vZi10eXBlXCIpO1xuICB9XG59XG4iLCJpbXBvcnQgY3JlYXRlTWVudXMsIHsgZ2V0TWVudUl0ZW1zIH0gZnJvbSBcIi4vb3MtbGlrZS1kcm9wZG93bi5qc1wiO1xuXG5jcmVhdGVNZW51cygpO1xuXG5jb25zdCBtZW51SXRlbXMgPSBnZXRNZW51SXRlbXMoKTtcbmNvbnN0IGxvZ1RleHRFbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb2ctdGV4dFwiKTtcblxubWVudUl0ZW1zLmZvckVhY2goKF9pdGVtKSA9PiB7XG4gIF9pdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKF9ldmVudCkgPT4ge1xuICAgIGlmIChfZXZlbnQuYnV0dG9uID09PSAwICYmIF9pdGVtLmdldEF0dHJpYnV0ZShcImVuYWJsZWRcIikgIT09IFwiZmFsc2VcIikge1xuICAgICAgY29uc29sZS5sb2coYENsaWNrZWQgJHtfaXRlbS5nZXRBdHRyaWJ1dGUoXCJpZFwiKX1gKTtcbiAgICAgIGxvZ1RleHRFbGVtLnRleHRDb250ZW50ID0gYENsaWNrZWQgJHtfaXRlbS5nZXRBdHRyaWJ1dGUoXCJpZFwiKX1gO1xuICAgIH1cbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJhZGRDbGFzc2VzIiwiX2VsZW0iLCJfY2xhc3NlcyIsImNsYXNzTGlzdCIsImFkZCIsIkRyb3Bkb3duQmFyIiwiZHJvcGRvd25zIiwiaHRtbEJhciIsImNvbnN0cnVjdG9yIiwiX2h0bWxCYXIiLCJ0aGlzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJwdXNoIiwiRHJvcGRvd24iLCJhdHRhY2hNb3VzZUVudGVyTGlzdGVuZXJzIiwiX2Ryb3Bkb3duIiwiYXR0YWNoTW91c2VFbnRlckxpc3RlbmVyIiwiZ2V0QW5jaG9yIiwiaHRtbEVsZW0iLCJhZGRFdmVudExpc3RlbmVyIiwic3dpdGNoT3BlbmVkRHJvcGRvd25zIiwiX3RhcmdldERyb3Bkb3duIiwidGFyZ2V0QW5jaG9yIiwiaXNFbmFibGVkIiwiY2xvc2VPcGVuZWREcm9wZG93bnMiLCJvcGVuRHJvcGRvd24iLCJfa2VlcE9wZW4iLCJudW1DbG9zZWQiLCJfbWVudSIsImluY2x1ZGVzIiwiY29udGFpbnMiLCJjbG9zZUhpZXJhcmNoeSIsIm9yaWdpbnMiLCJob3ZlckRlbGF5IiwiaHRtbEFuY2hvciIsIl9odG1sRHJvcGRvd25BbmNob3IiLCJnZXRBdHRyaWJ1dGUiLCJEcm9wZG93bk9yaWdpbiIsInN1Ym9yaWdpbnMiLCJvcmlnaW4iLCJhdHRhY2hDbGlja0xpc3RlbmVyIiwiYXR0YWNoUmVzaXplTGlzdGVuZXIiLCJhdHRhY2hDbG9zZU9uU2VsZWN0TGlzdGVuZXJzIiwiX29yaWdpbiIsInJlbW92ZSIsImNsb3NlRGVlcGVyVGhhbk1vdXNlIiwiX21vdXNlWCIsIl9tb3VzZVkiLCJfaW1tZWRpYXRlIiwidW5kZXJNb3VzZSIsImRvY3VtZW50IiwiZWxlbWVudHNGcm9tUG9pbnQiLCJtZW51VW5kZXJNb3VzZSIsImVsZW0iLCJzdWJtZW51cyIsInN1Ym1lbnUiLCJtZW51Q2xvc2VUaW1lb3V0Iiwic2V0VGltZW91dCIsImNsb3NlT25DbGlja091dHNpZGVIaWVyYXJjaHkiLCJfY2xpY2tUYXJnZXQiLCJfZWxlbTEiLCJfZWxlbTIiLCJjb250ZW50cyIsImVsZW1Ub0NoZWNrIiwiZWxlbWVudENvbnRhaW5zRWxlbWVudCIsInJlcG9zaXRpb25PZmZzY3JlZW5Ecm9wZG93bnMiLCJyZXBvc2l0aW9uT2Zmc2NyZWVuTWVudSIsImkiLCJsZW5ndGgiLCJfZXZlbnQiLCJjbGllbnRYIiwiY2xpZW50WSIsInRhcmdldCIsIndpbmRvdyIsImJpbmQiLCJpdGVtRGl2cyIsIml0ZW0iLCJidXR0b24iLCJlbnRlclRpbWUiLCJtZW51RWxlbSIsIml0ZW1FbGVtIiwibWVudUl0ZW1VbHMiLCJtZW51SXRlbURpdnMiLCJtZW51T3BlblRpbWVvdXQiLCJwb3BEaXJlY3Rpb24iLCJhcHBlYXJBbmltUnVubmluZyIsInN0YXRpYyIsIm5lZ2F0aXZlQW5jaG9ySG9yaXpCb3JkZXJPZmZzZXQiLCJuZWdhdGl2ZUFuY2hvclZlcnRCb3JkZXJPZmZzZXQiLCJuZWdhdGl2ZUJvcmRlck9mZnNldCIsImZ1bGxPZmZzZXQiLCJ0b3AiLCJib3R0b20iLCJyaWdodCIsImxlZnQiLCJfaHRtbEVsZW0iLCJfaG92ZXJEZWxheSIsInBvcERpciIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRBbGxVbHNBdFRoaXNEcm9wZG93bkxldmVsIiwiYXBwZW5kU3VibWVudUFycm93Iiwic3BsaXQiLCJhdHRhY2hNb3VzZUxlYXZlTGlzdGVuZXJzIiwiYXR0YWNoQW5pbUxpc3RlbmVycyIsInVscyIsIm5leHRVbCIsIm5leHRTaWJsaW5nIiwibm9kZVR5cGUiLCJtZW51Iiwic3ZnIiwiX3BhdGgiLCJfdGl0bGUiLCJfcGF0aENsYXNzZXMiLCJjcmVhdGVFbGVtZW50TlMiLCJzZXRBdHRyaWJ1dGUiLCJ0aXRsZSIsInRleHRDb250ZW50IiwiY3JlYXRlU3ZnIiwiYXBwZW5kQ2hpbGQiLCJwYXRoIiwiaW5zZXJ0QmVmb3JlIiwic2V0TWVudVRvRGVmYXVsdFBvc2l0aW9uIiwic2Vjb25kT2Zmc2V0IiwicG9zaXRpb25PZmZzZXRWYWx1ZXMiLCJpbnZEaXIiLCJpbnZlcnRlZERpcmVjdGlvbnMiLCJzdHlsZSIsInZ3IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJpbm5lcldpZHRoIiwidmgiLCJjbGllbnRIZWlnaHQiLCJpbm5lckhlaWdodCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsZWZ0U3RyIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJsZWZ0TnVtIiwiTnVtYmVyIiwicmVwbGFjZSIsInRvcFN0ciIsInRvcE51bSIsIl9kaXYiLCJzY2hlZHVsZU9wZW5NZW51IiwiY2xlYXJUaW1lb3V0Iiwic2NoZWR1bGVDbG9zZU1lbnUiLCJfbm9kZUxpc3QiLCJfY2xhc3MiLCJub2RlTGlzdENvbnRhaW5zQ2xhc3MiLCJ0b2dnbGVPcGVuTWVudSIsImxpc3RFbGVtIiwibm9kZUxpc3RDb250YWluc0VsZW1lbnQiLCJhZGRNb3VzZW92ZXJDbGFzcyIsIl9tZW51SXRlbSIsIl9vcGVuT25Ib3ZlciIsInVsIiwibWVudUl0ZW0iLCJhbmltYXRpb25OYW1lIiwidXBkYXRlTWVudUFuaW1Qb3NpdGlvbiIsImh0bWxNZW51QmFycyIsImh0bWxMb25lQW5jaG9ycyIsImJhcnMiLCJhbmNob3JzIiwiX2JhciIsIl9hbmNob3IiLCJtZW51SXRlbXMiLCJsb2dUZXh0RWxlbSIsIl9pdGVtIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=